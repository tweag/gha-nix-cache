import{g as n,i as r}from"./index-w1dbetra.js";var d=await import("node:child_process"),i=await import("./core-kjnjkt1z.js"),p=await import("./io-v21dydqq.js"),a=await import("node:process");a.default.on("uncaughtException",(e)=>{console.error(e&&e.stack?e.stack:e),i.error(e.message),i.setFailed(e.message)});i.info("Starting server...");var c=`${a.env.RUNNER_TEMP}/gha-nix-cache`;await p.mkdirP(c);var t=d.fork(`${import.meta.dirname}/server.js`,[],{cwd:c,detached:!0,stdio:["ipc","ignore","inherit"]});i.info("Waiting for server to start...");await new Promise((e,o)=>{t.on("exit",(s,m)=>{o(new Error(`Server process exited unexpectedly with code ${s}`))}),t.on("message",(s)=>{if(s==="started")e();else t.kill(),o(new Error(`Server process sent unexpected message: ${s}`))})});i.info("Server is listening.");t.unref();t.channel.unref();

//# debugId=09372883E81101D364756E2164756E21
//# sourceMappingURL=index.js.map

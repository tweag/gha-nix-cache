import{g as n,i as r}from"./index-w1dbetra.js";var d=await import("node:child_process"),i=await import("./core-kjnjkt1z.js"),p=await import("./io-v21dydqq.js"),a=await import("node:process");a.default.on("uncaughtException",(e)=>{console.error(e&&e.stack?e.stack:e),i.error(e.message),i.setFailed(e.message)});i.info("Starting server...");var c=`${a.env.RUNNER_TEMP}/gha-nix-cache`;await p.mkdirP(c);var t=d.fork(`${import.meta.dirname}/server.js`,[],{cwd:c,detached:!0,stdio:["ipc","ignore","inherit"]});i.info("Waiting for server to start...");await new Promise((e,o)=>{t.on("exit",(s,m)=>{o(new Error(`Server process exited unexpectedly with code ${s}`))}),t.on("message",(s)=>{if(s==="started")e();else t.kill(),o(new Error(`Server process sent unexpected message: ${s}`))})});i.info("Server is listening.");t.unref();t.channel.unref();

//# debugId=09372883E81101D364756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL2luZGV4LmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWwogICAgImNvbnN0IGNoaWxkX3Byb2Nlc3MgPSBhd2FpdCBpbXBvcnQoJ25vZGU6Y2hpbGRfcHJvY2VzcycpO1xuY29uc3QgY29yZSA9IGF3YWl0IGltcG9ydCgnQGFjdGlvbnMvY29yZScpO1xuY29uc3QgaW8gPSBhd2FpdCBpbXBvcnQoJ0BhY3Rpb25zL2lvJyk7XG5jb25zdCBwcm9jZXNzID0gYXdhaXQgaW1wb3J0KCdub2RlOnByb2Nlc3MnKTtcblxucHJvY2Vzcy5kZWZhdWx0Lm9uKCd1bmNhdWdodEV4Y2VwdGlvbicsIChlcnJvcikgPT4ge1xuXHRjb25zb2xlLmVycm9yKGVycm9yICYmIGVycm9yLnN0YWNrID8gZXJyb3Iuc3RhY2sgOiBlcnJvcik7XG5cdGNvcmUuZXJyb3IoZXJyb3IubWVzc2FnZSk7XG5cdGNvcmUuc2V0RmFpbGVkKGVycm9yLm1lc3NhZ2UpO1xufSk7XG5cbmNvcmUuaW5mbygnU3RhcnRpbmcgc2VydmVyLi4uJyk7XG5jb25zdCB3b3JrRGlyID0gYCR7cHJvY2Vzcy5lbnYuUlVOTkVSX1RFTVB9L2doYS1uaXgtY2FjaGVgO1xuYXdhaXQgaW8ubWtkaXJQKHdvcmtEaXIpO1xuY29uc3Qgc2VydmVyID0gY2hpbGRfcHJvY2Vzcy5mb3JrKGAke2ltcG9ydC5tZXRhLmRpcm5hbWV9L3NlcnZlci5qc2AsIFtdLCB7XG5cdGN3ZDogd29ya0Rpcixcblx0ZGV0YWNoZWQ6IHRydWUsXG5cdHN0ZGlvOiBbJ2lwYycsICdpZ25vcmUnLCAnaW5oZXJpdCddLFxufSk7XG5cbmNvcmUuaW5mbygnV2FpdGluZyBmb3Igc2VydmVyIHRvIHN0YXJ0Li4uJyk7XG5hd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdHNlcnZlci5vbignZXhpdCcsIChjb2RlLCBfc2lnbmFsKSA9PiB7XG5cdFx0cmVqZWN0KG5ldyBFcnJvcihgU2VydmVyIHByb2Nlc3MgZXhpdGVkIHVuZXhwZWN0ZWRseSB3aXRoIGNvZGUgJHtjb2RlfWApKTtcblx0fSk7XG5cdHNlcnZlci5vbignbWVzc2FnZScsIChtZXNzYWdlKSA9PiB7XG5cdFx0aWYgKG1lc3NhZ2UgPT09ICdzdGFydGVkJykge1xuXHRcdFx0cmVzb2x2ZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzZXJ2ZXIua2lsbCgpO1xuXHRcdFx0cmVqZWN0KG5ldyBFcnJvcihgU2VydmVyIHByb2Nlc3Mgc2VudCB1bmV4cGVjdGVkIG1lc3NhZ2U6ICR7bWVzc2FnZX1gKSk7XG5cdFx0fVxuXHR9KTtcbn0pO1xuY29yZS5pbmZvKCdTZXJ2ZXIgaXMgbGlzdGVuaW5nLicpO1xuc2VydmVyLnVucmVmKCk7XG5zZXJ2ZXIuY2hhbm5lbC51bnJlZigpO1xuIgogIF0sCiAgIm1hcHBpbmdzIjogIitDQUFBLElBQU0sRUFBZ0IsS0FBYSw4QkFDN0IsRUFBTyxLQUFhLDhCQUNwQixFQUFLLEtBQWEsNEJBQ2xCLEVBQVUsS0FBYSx3QkFFN0IsRUFBUSxRQUFRLEdBQUcsb0JBQXFCLENBQUMsSUFBVSxDQUNsRCxRQUFRLE1BQU0sR0FBUyxFQUFNLE1BQVEsRUFBTSxNQUFRLENBQUssRUFDeEQsRUFBSyxNQUFNLEVBQU0sT0FBTyxFQUN4QixFQUFLLFVBQVUsRUFBTSxPQUFPLEVBQzVCLEVBRUQsRUFBSyxLQUFLLG9CQUFvQixFQUM5QixJQUFNLEVBQVUsR0FBRyxFQUFRLElBQUksNEJBQy9CLE1BQU0sRUFBRyxPQUFPLENBQU8sRUFDdkIsSUFBTSxFQUFTLEVBQWMsS0FBSyxHQUFHLFlBQVksb0JBQXFCLENBQUMsRUFBRyxDQUN6RSxJQUFLLEVBQ0wsU0FBVSxHQUNWLE1BQU8sQ0FBQyxNQUFPLFNBQVUsU0FBUyxDQUNuQyxDQUFDLEVBRUQsRUFBSyxLQUFLLGdDQUFnQyxFQUMxQyxNQUFNLElBQUksUUFBUSxDQUFDLEVBQVMsSUFBVyxDQUN0QyxFQUFPLEdBQUcsT0FBUSxDQUFDLEVBQU0sSUFBWSxDQUNwQyxFQUFPLElBQUksTUFBTSxnREFBZ0QsR0FBTSxDQUFDLEVBQ3hFLEVBQ0QsRUFBTyxHQUFHLFVBQVcsQ0FBQyxJQUFZLENBQ2pDLEdBQUksSUFBWSxVQUNmLEVBQVEsTUFFUixHQUFPLEtBQUssRUFDWixFQUFPLElBQUksTUFBTSwyQ0FBMkMsR0FBUyxDQUFDLEVBRXZFLEVBQ0QsRUFDRCxFQUFLLEtBQUssc0JBQXNCLEVBQ2hDLEVBQU8sTUFBTSxFQUNiLEVBQU8sUUFBUSxNQUFNIiwKICAiZGVidWdJZCI6ICIwOTM3Mjg4M0U4MTEwMUQzNjQ3NTZFMjE2NDc1NkUyMSIsCiAgIm5hbWVzIjogW10KfQ==

import{a as t,b as o,c as a,d}from"./index-657qg6mr.js";var i=a(),l=d(),u=o(),p=t("node:fs/promises"),f=t("node:child_process");process.on("uncaughtException",function(e){console.error(e&&e.stack?e.stack:e),i.error(e.message),i.setFailed(e.message)});i.info("Starting server...");var c=`${process.env.RUNNER_TEMP}/gha-nix-cache`;await u.mkdirP(c);var s=f.fork(`${import.meta.dirname}/server.js`,[],{cwd:c,detached:!0,stdio:["ipc","ignore","inherit"]});i.info("Waiting for server to start...");await new Promise((e,r)=>{s.on("exit",(n,g)=>{r(`Server process exited unexpectedly with code ${n}`)}),s.on("message",(n)=>{if(n=="started")e();else s.kill(),r(`Server process sent unexpected message: ${n}`)})});i.info("Server is listening.");s.unref();s.channel.unref();

//# debugId=69BD3C44ECFB991064756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL2luZGV4LmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWwogICAgImNvbnN0IGNvcmUgPSByZXF1aXJlKCdAYWN0aW9ucy9jb3JlJyk7XG5jb25zdCBjYWNoZSA9IHJlcXVpcmUoJ0BhY3Rpb25zL2NhY2hlJyk7XG5jb25zdCBpbyA9IHJlcXVpcmUoJ0BhY3Rpb25zL2lvJyk7XG5jb25zdCBmcyA9IHJlcXVpcmUoJ25vZGU6ZnMvcHJvbWlzZXMnKTtcbmNvbnN0IGNoaWxkX3Byb2Nlc3MgPSByZXF1aXJlKCdub2RlOmNoaWxkX3Byb2Nlc3MnKTtcblxucHJvY2Vzcy5vbigndW5jYXVnaHRFeGNlcHRpb24nLCBmdW5jdGlvbihlcnJvcikge1xuICBjb25zb2xlLmVycm9yKChlcnJvciAmJiBlcnJvci5zdGFjaykgPyBlcnJvci5zdGFjayA6IGVycm9yKTtcbiAgY29yZS5lcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgY29yZS5zZXRGYWlsZWQoZXJyb3IubWVzc2FnZSk7XG59KTtcblxuY29yZS5pbmZvKFwiU3RhcnRpbmcgc2VydmVyLi4uXCIpO1xuY29uc3Qgd29ya0RpciA9IGAke3Byb2Nlc3MuZW52LlJVTk5FUl9URU1QfS9naGEtbml4LWNhY2hlYDtcbmF3YWl0IGlvLm1rZGlyUCh3b3JrRGlyKTtcbmNvbnN0IHNlcnZlciA9IGNoaWxkX3Byb2Nlc3MuZm9yayhgJHtpbXBvcnQubWV0YS5kaXJuYW1lfS9zZXJ2ZXIuanNgLCBbXSwge1xuICBjd2Q6IHdvcmtEaXIsXG4gIGRldGFjaGVkOiB0cnVlLFxuICBzdGRpbzogWydpcGMnLCAnaWdub3JlJywgJ2luaGVyaXQnXSxcbn0pO1xuXG5jb3JlLmluZm8oXCJXYWl0aW5nIGZvciBzZXJ2ZXIgdG8gc3RhcnQuLi5cIik7XG5hd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gIHNlcnZlci5vbignZXhpdCcsIChjb2RlLCBzaWduYWwpID0+IHtcbiAgICByZWplY3QoYFNlcnZlciBwcm9jZXNzIGV4aXRlZCB1bmV4cGVjdGVkbHkgd2l0aCBjb2RlICR7Y29kZX1gKTtcbiAgfSk7XG4gIHNlcnZlci5vbignbWVzc2FnZScsIChtc2cpID0+IHtcbiAgICBpZiAobXNnID09ICdzdGFydGVkJykge1xuICAgICAgcmVzb2x2ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXJ2ZXIua2lsbCgpO1xuICAgICAgcmVqZWN0KGBTZXJ2ZXIgcHJvY2VzcyBzZW50IHVuZXhwZWN0ZWQgbWVzc2FnZTogJHttc2d9YCk7XG4gICAgfVxuICB9KTtcbn0pO1xuY29yZS5pbmZvKFwiU2VydmVyIGlzIGxpc3RlbmluZy5cIik7XG5zZXJ2ZXIudW5yZWYoKTtcbnNlcnZlci5jaGFubmVsLnVucmVmKCk7XG4iCiAgXSwKICAibWFwcGluZ3MiOiAid0RBQUEsSUFBTSxNQUNBLE1BQ0EsTUFDQSx3QkFDQSwwQkFFTixRQUFRLEdBQUcsNEJBQTZCLENBQUMsRUFBTyxDQUM5QyxRQUFRLE1BQU8sR0FBUyxFQUFNLE1BQVMsRUFBTSxNQUFRLENBQUssRUFDMUQsRUFBSyxNQUFNLEVBQU0sT0FBTyxFQUN4QixFQUFLLFVBQVUsRUFBTSxPQUFPLEVBQzdCLEVBRUQsRUFBSyxLQUFLLG9CQUFvQixFQUM5QixJQUFNLEVBQVUsR0FBRyxRQUFRLElBQUksNEJBQy9CLE1BQU0sRUFBRyxPQUFPLENBQU8sRUFDdkIsSUFBTSxFQUFTLEVBQWMsS0FBSyxHQUFHLFlBQVksb0JBQXFCLENBQUMsRUFBRyxDQUN4RSxJQUFLLEVBQ0wsU0FBVSxHQUNWLE1BQU8sQ0FBQyxNQUFPLFNBQVUsU0FBUyxDQUNwQyxDQUFDLEVBRUQsRUFBSyxLQUFLLGdDQUFnQyxFQUMxQyxNQUFNLElBQUksUUFBUSxDQUFDLEVBQVMsSUFBVyxDQUNyQyxFQUFPLEdBQUcsT0FBUSxDQUFDLEVBQU0sSUFBVyxDQUNsQyxFQUFPLGdEQUFnRCxHQUFNLEVBQzlELEVBQ0QsRUFBTyxHQUFHLFVBQVcsQ0FBQyxJQUFRLENBQzVCLEdBQUksR0FBTyxVQUNULEVBQVEsTUFFUixHQUFPLEtBQUssRUFDWixFQUFPLDJDQUEyQyxHQUFLLEVBRTFELEVBQ0YsRUFDRCxFQUFLLEtBQUssc0JBQXNCLEVBQ2hDLEVBQU8sTUFBTSxFQUNiLEVBQU8sUUFBUSxNQUFNIiwKICAiZGVidWdJZCI6ICI2OUJEM0M0NEVDRkI5OTEwNjQ3NTZFMjE2NDc1NkUyMSIsCiAgIm5hbWVzIjogW10KfQ==
